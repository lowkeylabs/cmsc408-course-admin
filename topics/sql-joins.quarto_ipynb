{
  "cells": [
    {
      "cell_type": "markdown",
      "metadata": {},
      "source": [
        "---\n",
        "title: SQL Joins\n",
        "tasl:\n",
        "    source: fa2023\\lectures\\lect15-sql-toolset.qmd\n",
        "    tags:\n",
        "    - lecture\n",
        "    - lecture-15\n",
        "    topic: SQL Joins\n",
        "---\n",
        "\n",
        "\n",
        "\n",
        "# SQL Joins\n",
        "\n",
        "## SQL Joins\n",
        "\n",
        "![](./assets/joins-figures.png)\n",
        "\n",
        "* We've spent a TON of time learning about normalization, that is, how to reduce and remove redundancy in our database.\n",
        "* Now, we're going to learn how to build the data back up into something larger - a *join table* - for querying.\n",
        "* Joins permit us to combine data in tables and then select from the larger, *join table*.\n",
        "\n",
        "<p>&nbsp;</p>\n",
        "<center> ***Why has SQL survived for over 50 years?***  *(ask ChatGPT!)*</center>\n",
        "\n",
        "## SQL Joins\n",
        ":::: {.columns}\n",
        "::: {.column width=60%}\n",
        "### [SELECT statement](https://dev.mysql.com/doc/refman/8.4/en/select.html){target=\"_blank\"}\n",
        "\n",
        "```{sql}\n",
        "SELECT \n",
        "    columns_or_expressions -- Choose specific columns or expressions to return\n",
        "FROM \n",
        "    table1\n",
        "    JOIN_TYPE JOIN table2 ON join_condition\n",
        "    -- join_type can be: INNER, LEFT, RIGHT, or FULL JOIN with join condition\n",
        "    JOIN_TYPE JOIN table3 ON join_condition -- Additional joins as needed\n",
        "WHERE \n",
        "    filter_condition -- Filter rows based on a condition\n",
        "GROUP BY \n",
        "    column1, column2, ... -- Group rows based on one or more columns\n",
        "HAVING \n",
        "    aggregate_condition -- Filter groups using aggregate functions (like COUNT, SUM, etc.)\n",
        "ORDER BY \n",
        "    column1 [ASC|DESC], column2 [ASC|DESC], ... -- Sort the final result set\n",
        "LIMIT \n",
        "    number_of_rows; -- (Optional) Limits the number of rows returned\n",
        "```\n",
        "\n",
        ":::\n",
        "::: {.column width=40%}\n",
        "### Order of Operations\n",
        "\n",
        "* FROM (including JOINS) -- create a new table,\n",
        "* WHERE -- to filter rows\n",
        "* GROUP BY -- aggregate results to remove duplicates\n",
        "* HAVING -- filter on aggregates\n",
        "* SELECT -- to select rows\n",
        "* ORDER BY -- to order result set\n",
        "* LIMIT -- to restrict number of rows returned\n",
        ":::\n",
        "::::\n",
        "\n",
        "\n",
        "\n",
        "## SQL Joins\n",
        ":::: {.columns}\n",
        "::: {.column width=60%}\n",
        "\n",
        "### Example from HW7\n",
        "\n",
        "```{sql}\n",
        "SELECT \n",
        "    CONCAT(people.first_name, ' ', people.last_name) AS \"Employee name\",\n",
        "    skills.name AS skill_name\n",
        "FROM \n",
        "    peopleskills \n",
        "      JOIN skills ON peopleskills.skills_id = skills.id\n",
        "      JOIN people ON peopleskills.people_id = people.id\n",
        "WHERE \n",
        "    people.last_name = 'Person 1';\n",
        "```\n",
        "\n",
        ":::\n",
        "::: {.column width=40%}\n",
        "* A join is specified between tables, one on the left and one on the right.\n",
        "* Multiple joins can occur in the same SQL statement.  These are usually processed left to right.\n",
        "* The *JOIN* command create a single large table for selecting, projecting and ordering.\n",
        "* The *ON* statement specific how the tables connect.\n",
        "* FOREIGN KEYS and JOINS are similar - but the DBMS doesn't share!\n",
        "* SAFETY TIP - build joins slowly and carefully until you're comfy!\n",
        ":::\n",
        "::::\n",
        "\n",
        "\n",
        "## SQL Joins\n",
        "\n",
        ":::: {.columns}\n",
        "::: {.column width=60%}\n",
        "[![](./assets/homework7.png)](https://virginiacommonwealth.instructure.com/courses/105097/assignments/966535){target=\"_blank\"}\n",
        ":::\n",
        "::: {.column width=40%}\n",
        "### SQL Joins\n",
        "\n",
        "* Let's explore *joins* in\n",
        "the context of homework 7.\n",
        "\n",
        "* We'll be spending a significant amount of time\n",
        "with joins and aggregates!\n",
        "\n",
        ":::\n",
        "::::\n"
      ],
      "id": "a69608cb"
    }
  ],
  "metadata": {
    "kernelspec": {
      "name": "python3",
      "language": "python",
      "display_name": "Python 3 (ipykernel)",
      "path": "C:\\Users\\jdleonard\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\cmsc427-yciDUe4a-py3.13\\share\\jupyter\\kernels\\python3"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 5
}