---
date: 11/4/2024
lecture-id: 21
title: Joins and Selects 1
---

```{python}
#| echo: false
#| label: setup
lecture_id = 21
n_rows = 8

housekeeping_margin_column_width = "9%"
housekeeping_left_column_width="45%"
housekeeping_right_column_width="40%"

housekeeping_vertical_spacer = "25px"

discussion_items = [
    'Graders are still working on HW5, Deliverable 8 and Deliverable 9.',
    '[Homework 6 - due 11/3](https://virginiacommonwealth.instructure.com/courses/105097/assignments/966531){target="_blank"}',
    '[Homework 6.5 - due 11/7](https://virginiacommonwealth.instructure.com/courses/105097/assignments/966531){target="_blank"}',
    '[Homework 7 - due 11/10](https://virginiacommonwealth.instructure.com/courses/105097/assignments/966531){target="_blank"}',
    '[Deliverable 12 - due 11/3](https://virginiacommonwealth.instructure.com/courses/105097/assignments/966531){target="_blank"}',
]

lecture_topics = [
    '[Discussion of Deliverable 12](#deliverable-12---semester-project)',
    '[Primary and Foreign keys](#primary-and-foreign-keys)',
    '[SQL Joins and Selects](#sql-joins)'
]
```

{{< include "./_template-lecture-housekeeping.qmd" >}}
{{< include "./_template-lecture-gantt.qmd" >}}

# Deliverable 12 - Semester Project

## Deliverable 12 - Semester Project

:::: {.columns}
::: {.column width=60%}
[![](./assets/deliverable-12.png)](https://virginiacommonwealth.instructure.com/courses/105097/assignments/966535){target="_blank"}
:::
::: {.column width=40%}
### Final Submission

* Previous activities
    - Project pitch
    - Project design

* Project Submission
    - Web design
    - Screenshots of each screen
    - Reports page
    - Future considerations
    - Reflection
:::
::::

<center>Jump to assignment and discuss submission</center>
<center>We'll talk more about this next week!</center>

# Primary and Foreign Keys

## Primary and Foreign Keys
:::: {.columns}
::: {.column width=60%}

```{sql}
drop table if exists peopleskills;
CREATE TABLE peopleskills (
    id INT AUTO_INCREMENT PRIMARY KEY,
    skills_id INT NOT NULL,
    people_id INT NOT NULL,
    date_acquired DATE NOT NULL,
    FOREIGN KEY (skills_id) REFERENCES skills(id) 
        ON DELETE CASCADE 
        ON UPDATE CASCADE   
    ,FOREIGN KEY (people_id) REFERENCES people(id) 
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

```

:::
::: {.column width=40%}
* Primary and Foreign Keys are known as "integrity constraints"
* They provide clues to the DBMS about how to handle relationships
between records in different tables.
* They are checked when records are added, deleted and updated
:::
::::



## [Foreign Keys](https://www.mysqltutorial.org/mysql-foreign-key/)

MySQL has five reference options: CASCADE, SET NULL, NO ACTION, RESTRICT, and SET DEFAULT.

CASCADE
: if a row from the parent table is deleted or updated, the values of the matching rows in the child table are automatically deleted or updated.

SET NULL
: if a row from the parent table is deleted or updated, the values of the foreign key column (or columns) in the child table are set to NULL.

RESTRICT
: if a row from the parent table has a matching row in the child table, MySQL rejects deleting or updating rows in the parent table.

NO ACTION
: is the same as RESTRICT.

SET DEFAULT
: is recognized by the MySQL parser. However, this action is rejected by both InnoDB and NDB tables.

<center>Jump to code and review MY-DDL-SQL</center>


{{< include "../../topics/_sql-joins.qmd" >}}

{{< include "./_template-lecture-housekeeping.qmd" >}}