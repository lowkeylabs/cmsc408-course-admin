<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Set Operations – CMSC 408 - Databases Study Guide</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../relational-models/join-operations.html" rel="next">
<link href="../relational-models/basic-operations.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../guide.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">CMSC 408 - Databases Study Guide</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../er-models/index.html" target="_blank"> 
<span class="menu-text">ER Models</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../relational-models/index.html" target="_blank"> 
<span class="menu-text">Relational Models</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../relational-models/intro-to-relational-models.html">Relational Models</a></li><li class="breadcrumb-item"><a href="../relational-models/set-operations.html">Set Operations</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">ER Modeling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../er-models/overview-of-database-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Database Design*</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../er-models/intro-to-er-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro to ER models*</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../er-models/entities-and-attributes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Entities and Attributes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../er-models/relationships-and-cardinality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Relations and Cardinality</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../er-models/keys-and-identifiers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Keys and Identifiers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../er-models/er-diagramming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ER Diagramming*</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../er-models/weak-and-strong-entities.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Weak and Strong Entities*</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../er-models/advanced-concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Advanced Concepts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../er-models/best-practices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Best Practices</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../er-models/translating-to-relational-schema.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Translation</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Relational Models</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../relational-models/intro-to-relational-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro to relational models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../relational-models/schemas-and-keys.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schemas and Keys</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../relational-models/basic-operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basic Operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../relational-models/set-operations.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Set Operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../relational-models/join-operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Join Operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../relational-models/renaming-and-division.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Renaming and Division</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../relational-models/relational-algebra-vs-sql.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Relational algebra vs SQL</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../relational-models/advanced-queries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Advanced Queries</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../relational-models/practical-applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practical Applications</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction-to-set-theory-and-relational-algebra" id="toc-introduction-to-set-theory-and-relational-algebra" class="nav-link active" data-scroll-target="#introduction-to-set-theory-and-relational-algebra">Introduction to Set Theory and Relational Algebra</a></li>
  <li><a href="#intersection-operation-in-relational-algebra" id="toc-intersection-operation-in-relational-algebra" class="nav-link" data-scroll-target="#intersection-operation-in-relational-algebra">Intersection Operation in Relational Algebra</a>
  <ul class="collapse">
  <li><a href="#properties-of-the-intersection-operator" id="toc-properties-of-the-intersection-operator" class="nav-link" data-scroll-target="#properties-of-the-intersection-operator">Properties of the Intersection Operator</a></li>
  <li><a href="#explanation-of-properties" id="toc-explanation-of-properties" class="nav-link" data-scroll-target="#explanation-of-properties">Explanation of properties</a></li>
  </ul></li>
  <li><a href="#difference-in-relational-algebra" id="toc-difference-in-relational-algebra" class="nav-link" data-scroll-target="#difference-in-relational-algebra">Difference in Relational Algebra</a>
  <ul class="collapse">
  <li><a href="#properties-of-the-difference-operator" id="toc-properties-of-the-difference-operator" class="nav-link" data-scroll-target="#properties-of-the-difference-operator">Properties of the Difference Operator</a></li>
  <li><a href="#explanation-of-properties-1" id="toc-explanation-of-properties-1" class="nav-link" data-scroll-target="#explanation-of-properties-1">Explanation of properties</a></li>
  </ul></li>
  <li><a href="#cartesian-product-in-relational-algebra" id="toc-cartesian-product-in-relational-algebra" class="nav-link" data-scroll-target="#cartesian-product-in-relational-algebra">Cartesian Product in Relational Algebra</a>
  <ul class="collapse">
  <li><a href="#properties-of-the-cartesian-product-operator" id="toc-properties-of-the-cartesian-product-operator" class="nav-link" data-scroll-target="#properties-of-the-cartesian-product-operator">Properties of the Cartesian Product Operator</a></li>
  <li><a href="#explanation-of-properties-2" id="toc-explanation-of-properties-2" class="nav-link" data-scroll-target="#explanation-of-properties-2">Explanation of properties</a></li>
  </ul></li>
  <li><a href="#combining-relations-using-set-operations" id="toc-combining-relations-using-set-operations" class="nav-link" data-scroll-target="#combining-relations-using-set-operations">Combining Relations Using Set Operations</a></li>
  <li><a href="#set-operation-requirements-and-considerations" id="toc-set-operation-requirements-and-considerations" class="nav-link" data-scroll-target="#set-operation-requirements-and-considerations">Set Operation Requirements and Considerations</a></li>
  <li><a href="#examples-of-set-operations-in-relational-queries" id="toc-examples-of-set-operations-in-relational-queries" class="nav-link" data-scroll-target="#examples-of-set-operations-in-relational-queries">Examples of Set Operations in Relational Queries</a></li>
  <li><a href="#set-operations-in-real-world-databases" id="toc-set-operations-in-real-world-databases" class="nav-link" data-scroll-target="#set-operations-in-real-world-databases">Set Operations in Real-World Databases</a></li>
  <li><a href="#summary-of-set-operations-in-relational-algebra" id="toc-summary-of-set-operations-in-relational-algebra" class="nav-link" data-scroll-target="#summary-of-set-operations-in-relational-algebra">Summary of Set Operations in Relational Algebra</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../relational-models/intro-to-relational-models.html">Relational Models</a></li><li class="breadcrumb-item"><a href="../relational-models/set-operations.html">Set Operations</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Set Operations</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!--
Hey Chatgpt.  I'd you to play the role of a professor teaching an undergraduate computer science course covering databases.  The course consists of several modules including: entity-relationship models, relational model and relational algebra, normal forms and normalization, and SQL.

The unit covering relational models and relational algebra includes the following topics:

The relational model and relational algebra form the foundation of modern relational databases, providing a framework for data organization and manipulation. These modules will introduce students to the core concepts of the relational model, including relations, keys, and schemas, and guide them through the essential operations of relational algebra. By the end of this series, students will gain the skills to perform complex queries and understand the practical applications of relational databases in real-world scenarios.


1. [**Introduction to the Relational Model**](intro-to-relational-model.qmd)
   - Definition of the relational model.  
   - Key components: relations, tuples, attributes, domains.  
   - The importance of the relational model in modern databases.  

2. [**Relational Schemas and Keys**](relational-schemas-and-keys.qmd)  
   - Defining relational schemas.  
   - Primary keys, candidate keys, and foreign keys.  
   - The role of keys in ensuring data integrity.  

3. [**Relational Algebra: Basic Operations**](relational-algebra-basic-operations.qmd)  
   - Introduction to relational algebra.  
   - Core operations: selection, projection, and union.  
   - Examples and practical applications of these operations.  

4. [**Set Operations in Relational Algebra**](set-operations-in-relational-algebra.qmd)  
   - Set theory basics and their application in relational algebra.  
   - Intersection, difference, and Cartesian product operations.  
   - Combining relations using set operations.  

5. [**Join Operations in Relational Algebra**](join-operations-in-relational-algebra.qmd)  
   - Inner join, outer join, and their types (left, right, full).  
   - Natural join and theta join.  
   - Use cases and examples of different join operations.  

6. [**Renaming and Division in Relational Algebra**](renaming-and-division-in-relational-algebra.qmd)  
   - The renaming operation and its use in query design.  
   - Division operation: definition and examples.  
   - Application of division in relational queries.  

7. [**Relational Algebra vs SQL**](relational-algebra-vs-sql.qmd)  
   - Mapping relational algebra operations to SQL.  
   - Differences between procedural relational algebra and declarative SQL.  
   - Practical examples demonstrating the use of both.  

8. [**Advanced Relational Algebra Queries**](advanced-relational-algebra-queries.qmd)  
   - Nested queries and complex relational algebra operations.  
   - Handling multiple relations and subqueries.  
   - Performance considerations in advanced queries.  

9. [**Practical Applications of the Relational Model**](practical-applications-of-the-relational-model.qmd)  
   - Real-world use cases of the relational model.  
   - The role of relational databases in enterprise and cloud environments.  
   - Limitations of the relational model and when to consider alternatives.  

I'd like you to create 10 slides covering the following topics:

4. [**Set Operations in Relational Algebra**](set-operations-in-relational-algebra.qmd)  
   - Set theory basics and their application in relational algebra.  
   - Intersection, difference, and Cartesian product operations.  
   - Combining relations using set operations.  

Formatting of each slide is important.  Here are detailed instruction for the formatting of each slide.
1. Each slide should consist of a title denoted in markdown header level 2 (##).
1. Each title should describe the slide contents.  The title should not be numbered, just labeled.
1. Each slide should lead off with 2 sentences summarizing the content of the slide.
1. Each slide should contain 5-7 bullets. The bullets should be included in a special pandoc markdown format as shown below.
1. Each slide should end with an unbolded sentence summarizing the slide.

Below is an example of the formatting:
<start-example>
## Introduction to Entities and Attributes

Entities represent real-world objects or concepts, while attributes describe their characteristics. Understanding these concepts is crucial for effective database design.

::: {.guide-block-left}
- Entities are objects or things in the real world that have a distinct existence.
- Examples include a student, a course, a product, or an employee.
- Attributes are the properties or characteristics of entities.
- Each entity is represented by a set of attributes.
- Attributes describe details like the name, age, or ID of an entity.
:::
::: {.guide-block-right}
:::

*Entities and attributes form the foundation of the data model in database design.*
<end-example>

-->
<p>In this module, we explore the role of set operations within relational algebra, a key component of the relational model used in databases. Set operations such as union, intersection, difference, and Cartesian product enable efficient data manipulation by combining, filtering, and relating tables. Understanding these operations is crucial for constructing powerful queries and effectively managing relational databases.</p>
<section id="introduction-to-set-theory-and-relational-algebra" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-set-theory-and-relational-algebra">Introduction to Set Theory and Relational Algebra</h2>
<p>Set theory is a fundamental concept in relational algebra, providing the basis for operations that manipulate relations. These operations enable combining and filtering data effectively in relational databases.</p>
<div class="guide-block-left">
<ul>
<li>Set theory deals with the mathematical concept of sets, collections of distinct elements.</li>
<li>Relational algebra applies set theory to relations (tables) in databases.</li>
<li>Common operations include union, intersection, difference, and Cartesian product.</li>
<li>These operations allow manipulation of data across multiple relations.</li>
<li>Set operations are performed on relations that have the same schema.</li>
</ul>
</div>
<p><em>Set theory is essential for understanding how relational algebra manipulates and combines relations.</em></p>
<div class="guide-block-right">
<p><a href="https://www.seas.upenn.edu/~zives/03f/cis550/codd.pdf"><img src=".//assets/codd_acm_article.png" class="img-fluid"></a></p>
</div>
</section>
<section id="intersection-operation-in-relational-algebra" class="level2">
<h2 class="anchored" data-anchor-id="intersection-operation-in-relational-algebra">Intersection Operation in Relational Algebra</h2>
<p>The intersection operation retrieves rows that are common to two relations. It is used to find data that appears in both relations, making it useful when comparing datasets or finding shared entries between relations.</p>
<div class="guide-block-left">
<p><strong>∩ - Intersection</strong></p>
<ul>
<li>Intersection finds common tuples between two relations.</li>
<li>The result includes only those tuples that appear in both relations.</li>
<li>Denoted as Relation1 ∩ Relation2</li>
<li>It’s a binary operation, meaning it operates on two relations.</li>
<li>Both relations must be <em>union-compatible</em>, meaning they have the same set of attributes and data types.</li>
<li>Intersection is often used in conjunction with other set-based operations like union and difference.</li>
</ul>
</div>
<div class="guide-block-right">
<p><img src="./assets/venn-intersection.png" class="img-fluid"></p>
<p><strong>Examples</strong></p>
<ol type="1">
<li><p>Students ∩ Registered</p></li>
<li><p>Courses ∩ OfferedCourses</p></li>
<li><p>Employees ∩ Managers</p></li>
</ol>
</div>
<p><em>Intersection is useful for finding commonality between two sets of data in relational databases.</em></p>
<section id="properties-of-the-intersection-operator" class="level3">
<h3 class="anchored" data-anchor-id="properties-of-the-intersection-operator">Properties of the Intersection Operator</h3>
<div class="guide-block-left">
<p><strong>Definition</strong></p>
<p><span class="math display">\[
R_1 \cap R_2 = \{ t \mid t \in R_1 \text{ and } t \in R_2 \}
\]</span></p>
<ul>
<li>where <span class="math inline">\(t\)</span> is a row (tuple),</li>
<li><span class="math inline">\(R_1\)</span> and <span class="math inline">\(R_2\)</span> are relations (tables) with the same attributes,</li>
<li>The intersection operation returns a new relation containing only the rows that are present in both <span class="math inline">\(R_1\)</span> and <span class="math inline">\(R_2\)</span>,</li>
<li>The result consists of distinct rows that satisfy the condition of being in both relations.</li>
</ul>
</div>
<div class="guide-block-right">
<p><strong>Properties</strong></p>
<ul>
<li><strong>Idempotent</strong> – Applying the intersection of a relation with itself doesn’t change the result:</li>
</ul>
<p><span class="math display">\[
R \cap R = R
\]</span></p>
<ul>
<li><strong>Commutative</strong> – The order of relations in an intersection operation doesn’t matter:</li>
</ul>
<p><span class="math display">\[
R_1 \cap R_2 = R_2 \cap R_1
\]</span></p>
<ul>
<li><strong>Associative</strong> – The grouping of intersection operations doesn’t affect the result:</li>
</ul>
<p><span class="math display">\[
(R_1 \cap R_2) \cap R_3 = R_1 \cap (R_2 \cap R_3)
\]</span></p>
<ul>
<li><strong>Intersection with an empty set</strong> – The intersection of a relation with an empty set is the empty set:</li>
</ul>
<p><span class="math display">\[
R \cap \emptyset = \emptyset
\]</span></p>
<ul>
<li><strong>Intersection distributes over union</strong> – The intersection of two relations distributes over their union:</li>
</ul>
<p><span class="math display">\[
R_1 \cap (R_2 \cup R_3) = (R_1 \cap R_2) \cup (R_1 \cap R_3)
\]</span></p>
</div>
</section>
<section id="explanation-of-properties" class="level3">
<h3 class="anchored" data-anchor-id="explanation-of-properties">Explanation of properties</h3>
<ul>
<li><strong>Idempotent</strong>: Combining a relation with itself using intersection does not remove any rows, so the result remains the same.</li>
<li><strong>Commutative</strong>: The order of the relations in the intersection operation does not affect the result.</li>
<li><strong>Associative</strong>: You can group intersection operations in any way, and the result will be the same.</li>
<li><strong>Intersection with an empty set</strong>: Intersecting with an empty relation results in an empty set because no rows can be in both the original relation and an empty set.</li>
<li><strong>Distributed</strong>: Intersection distributes over union, meaning you can break down or combine intersections in a structured way over unions.</li>
</ul>
</section>
</section>
<section id="difference-in-relational-algebra" class="level2">
<h2 class="anchored" data-anchor-id="difference-in-relational-algebra">Difference in Relational Algebra</h2>
<p>Difference in relational algebra subtracts one relation from another, returning the rows that are present in the first relation but not the second.</p>
<div class="guide-block-left">
<ul>
<li>The difference operation returns tuples that are in one relation but not in the other.</li>
<li>It is often used to filter out unwanted data from a larger dataset.</li>
<li>The relations must have the same schema for the difference operation to be valid.</li>
<li>This operation can help isolate unique data points in a relation.</li>
<li>The result is a relation that includes only the data exclusive to the first set.</li>
</ul>
</div>
<div class="guide-block-right">

</div>
<p><em>Difference is a powerful tool for excluding data from one relation that is present in another.</em></p>
<section id="properties-of-the-difference-operator" class="level3">
<h3 class="anchored" data-anchor-id="properties-of-the-difference-operator">Properties of the Difference Operator</h3>
<div class="guide-block-left">
<p><strong>Definition</strong></p>
<p><span class="math display">\[
R_1 - R_2 = \{ t \mid t \in R_1 \text{ and } t \notin R_2 \}
\]</span></p>
<ul>
<li>where <span class="math inline">\(t\)</span> is a row (tuple),</li>
<li><span class="math inline">\(R_1\)</span> and <span class="math inline">\(R_2\)</span> are relations (tables) with the same attributes,</li>
<li>The difference operation returns a new relation containing only the rows that are in <span class="math inline">\(R_1\)</span> but not in <span class="math inline">\(R_2\)</span>,</li>
<li>The result consists of distinct rows that exist in <span class="math inline">\(R_1\)</span> and are absent from <span class="math inline">\(R_2\)</span>.</li>
</ul>
</div>
<div class="guide-block-right">
<p><strong>Properties</strong></p>
<ul>
<li><strong>Non-commutative</strong> – The order of relations in the difference operation matters:</li>
</ul>
<p><span class="math display">\[
R_1 - R_2 \neq R_2 - R_1
\]</span></p>
<ul>
<li><strong>Not associative</strong> – Grouping difference operations affects the result:</li>
</ul>
<p><span class="math display">\[
(R_1 - R_2) - R_3 \neq R_1 - (R_2 - R_3)
\]</span></p>
<ul>
<li><strong>Difference with an empty set</strong> – The difference between a relation and an empty set is the relation itself:</li>
</ul>
<p><span class="math display">\[
R_1 - \emptyset = R_1
\]</span></p>
<ul>
<li><strong>Difference with itself</strong> – The difference between a relation and itself is the empty set:</li>
</ul>
<p><span class="math display">\[
R_1 - R_1 = \emptyset
\]</span></p>
<ul>
<li><strong>Distributive over intersection</strong> – The difference operation distributes over intersection:</li>
</ul>
<p><span class="math display">\[
R_1 - (R_2 \cap R_3) = (R_1 - R_2) \cap (R_1 - R_3)
\]</span></p>
</div>
</section>
<section id="explanation-of-properties-1" class="level3">
<h3 class="anchored" data-anchor-id="explanation-of-properties-1">Explanation of properties</h3>
<ul>
<li><strong>Non-commutative</strong>: The order in which the relations are used in the difference matters because the result will include rows from <span class="math inline">\(R_1\)</span> that are not in <span class="math inline">\(R_2\)</span>, but not vice versa.</li>
<li><strong>Not associative</strong>: The grouping of relations in a difference operation affects the outcome since subtracting another relation later changes the rows that remain.</li>
<li><strong>Difference with an empty set</strong>: Subtracting an empty set from a relation has no effect since there are no rows to remove.</li>
<li><strong>Difference with itself</strong>: Subtracting a relation from itself results in an empty set, as no rows are left.</li>
<li><strong>Distributive over intersection</strong>: Difference distributes over intersection, allowing you to apply the difference to both parts of the intersection separately and then take their intersection.</li>
</ul>
</section>
</section>
<section id="cartesian-product-in-relational-algebra" class="level2">
<h2 class="anchored" data-anchor-id="cartesian-product-in-relational-algebra">Cartesian Product in Relational Algebra</h2>
<p>The Cartesian product operation combines all tuples from two relations, creating a new relation with every possible pair of tuples.</p>
<div class="guide-block-left">
<ul>
<li>Cartesian product pairs each tuple from the first relation with every tuple from the second.</li>
<li>The result relation includes all combinations of rows from both input relations.</li>
<li>The schema of the result is the combination of the schemas from both relations.</li>
<li>This operation can produce very large results if both relations have many tuples.</li>
<li>Cartesian product is a foundation for join operations in relational databases.</li>
</ul>
</div>
<div class="guide-block-right">

</div>
<p><em>Cartesian product provides the basis for combining relations, though it may require filtering for meaningful results.</em></p>
<p>Here’s the definition and properties of the <strong>Cartesian product</strong> operation in relational algebra, formatted similarly to the template provided:</p>
<section id="properties-of-the-cartesian-product-operator" class="level3">
<h3 class="anchored" data-anchor-id="properties-of-the-cartesian-product-operator">Properties of the Cartesian Product Operator</h3>
<div class="guide-block-left">
<p><strong>Definition</strong></p>
<p><span class="math display">\[
R_1 \times R_2 = \{ t_1 \, t_2 \mid t_1 \in R_1 \text{ and } t_2 \in R_2 \}
\]</span></p>
<ul>
<li>where <span class="math inline">\(t_1\)</span> is a row (tuple) from relation <span class="math inline">\(R_1\)</span>,</li>
<li><span class="math inline">\(t_2\)</span> is a row (tuple) from relation <span class="math inline">\(R_2\)</span>,</li>
<li>The Cartesian product returns a new relation formed by concatenating every row from <span class="math inline">\(R_1\)</span> with every row from <span class="math inline">\(R_2\)</span>,</li>
<li>The result contains all possible combinations of tuples from both relations.</li>
</ul>
</div>
<div class="guide-block-right">
<p><strong>Properties</strong></p>
<ul>
<li><strong>Non-commutative</strong> – The order of the relations matters in the Cartesian product:</li>
</ul>
<p><span class="math display">\[
R_1 \times R_2 \neq R_2 \times R_1
\]</span> (unless <span class="math inline">\(R_1\)</span> and <span class="math inline">\(R_2\)</span> are identical and have the same attributes)</p>
<ul>
<li><strong>Associative</strong> – The grouping of Cartesian product operations doesn’t affect the result:</li>
</ul>
<p><span class="math display">\[
(R_1 \times R_2) \times R_3 = R_1 \times (R_2 \times R_3)
\]</span></p>
<ul>
<li><strong>Cartesian product with an empty set</strong> – The Cartesian product with an empty relation results in an empty set:</li>
</ul>
<p><span class="math display">\[
R \times \emptyset = \emptyset
\]</span></p>
<ul>
<li><strong>Distributive over union</strong> – The Cartesian product distributes over union:</li>
</ul>
<p><span class="math display">\[
R_1 \times (R_2 \cup R_3) = (R_1 \times R_2) \cup (R_1 \times R_3)
\]</span></p>
<ul>
<li><strong>Size of result</strong> – The number of rows in the result is the product of the number of rows in the input relations:</li>
</ul>
<p><span class="math display">\[
|R_1 \times R_2| = |R_1| \times |R_2|
\]</span></p>
</div>
</section>
<section id="explanation-of-properties-2" class="level3">
<h3 class="anchored" data-anchor-id="explanation-of-properties-2">Explanation of properties</h3>
<ul>
<li><strong>Non-commutative</strong>: The order in which the relations are combined affects the resulting tuples (since concatenating <span class="math inline">\(t_1\)</span> with <span class="math inline">\(t_2\)</span> is different from <span class="math inline">\(t_2\)</span> with <span class="math inline">\(t_1\)</span>).</li>
<li><strong>Associative</strong>: You can group Cartesian product operations in any way, and the result will be the same.</li>
<li><strong>Cartesian product with an empty set</strong>: If either relation is empty, the result will be empty because there are no tuples to pair.</li>
<li><strong>Distributive over union</strong>: Cartesian product distributes over union, allowing you to break down the product into individual components and combine them after applying the product.</li>
<li><strong>Size of result</strong>: The Cartesian product increases the number of rows, multiplying the rows of <span class="math inline">\(R_1\)</span> by the rows of <span class="math inline">\(R_2\)</span>.</li>
</ul>
<p>This definition and properties align with the structure of other relational operations while explaining the Cartesian product in relational algebra.</p>
</section>
</section>
<section id="combining-relations-using-set-operations" class="level2">
<h2 class="anchored" data-anchor-id="combining-relations-using-set-operations">Combining Relations Using Set Operations</h2>
<p>Set operations allow the combination of multiple relations in a variety of ways, depending on the desired outcome of the query.</p>
<div class="guide-block-left">
<ul>
<li>Relational algebra supports various set operations like union, intersection, and difference.</li>
<li>These operations allow filtering and merging data across relations.</li>
<li>Set operations are only valid when the schemas of the involved relations match.</li>
<li>Use cases include combining multiple tables, finding common data, or filtering out specific records.</li>
<li>Understanding these operations is key to effective data manipulation in relational databases.</li>
</ul>
</div>
<div class="guide-block-right">

</div>
<p><em>Set operations provide flexible tools for combining and comparing datasets in relational databases.</em></p>
</section>
<section id="set-operation-requirements-and-considerations" class="level2">
<h2 class="anchored" data-anchor-id="set-operation-requirements-and-considerations">Set Operation Requirements and Considerations</h2>
<p>When performing set operations, it’s essential to ensure that both relations have compatible schemas and understand how each operation behaves.</p>
<div class="guide-block-left">
<ul>
<li>Set operations can only be performed on relations with identical schemas.</li>
<li>The number of attributes and their types must match for the operation to succeed.</li>
<li>Set operations can return large results, depending on the size of the input relations.</li>
<li>Performance considerations include the size of relations and efficiency of the operation.</li>
<li>Proper indexing can improve the speed of set operations in large databases.</li>
</ul>
</div>
<div class="guide-block-right">

</div>
<p><em>Understanding the requirements of set operations ensures successful and efficient data manipulation.</em></p>
</section>
<section id="examples-of-set-operations-in-relational-queries" class="level2">
<h2 class="anchored" data-anchor-id="examples-of-set-operations-in-relational-queries">Examples of Set Operations in Relational Queries</h2>
<p>Relational algebra operations like union, intersection, and difference can be directly applied in database queries to filter and combine data.</p>
<div class="guide-block-left">
<ul>
<li>Example: Union of two employee tables to combine employee records from two departments.</li>
<li>Example: Intersection of student and graduate tables to find students who have graduated.</li>
<li>Example: Difference between a product catalog and inventory to find out-of-stock items.</li>
<li>Cartesian product used to combine customer and order tables for further analysis.</li>
<li>Practical queries often combine set operations with other relational algebra operations.</li>
</ul>
</div>
<div class="guide-block-right">

</div>
<p><em>Set operations are applied in real-world scenarios to efficiently manipulate and query data.</em></p>
</section>
<section id="set-operations-in-real-world-databases" class="level2">
<h2 class="anchored" data-anchor-id="set-operations-in-real-world-databases">Set Operations in Real-World Databases</h2>
<p>Set operations play a vital role in real-world databases, helping manage and analyze large datasets effectively.</p>
<div class="guide-block-left">
<ul>
<li>Used to merge large datasets across departments or organizations.</li>
<li>Helpful in financial reporting, where records from different periods or regions are combined.</li>
<li>Set operations can aid in data cleaning by removing duplicates or irrelevant records.</li>
<li>They are fundamental in multi-relational databases where data is distributed across tables.</li>
<li>Often used in cloud environments for large-scale data analysis and processing.</li>
</ul>
</div>
<div class="guide-block-right">

</div>
<p><em>In practice, set operations streamline data integration and analysis across various industries.</em></p>
</section>
<section id="summary-of-set-operations-in-relational-algebra" class="level2">
<h2 class="anchored" data-anchor-id="summary-of-set-operations-in-relational-algebra">Summary of Set Operations in Relational Algebra</h2>
<p>Set operations, including union, intersection, difference, and Cartesian product, are key tools in relational algebra for manipulating and combining relations. They enable powerful queries that form the basis of relational database functionality.</p>
<div class="guide-block-left">
<ul>
<li>Set theory provides the foundation for combining and filtering relations.</li>
<li>Intersection finds common records, while difference filters out data from one relation.</li>
<li>Cartesian product creates all possible combinations of tuples from two relations.</li>
<li>Union merges two relations, removing duplicates.</li>
<li>These operations are essential for querying and managing relational databases.</li>
</ul>
</div>
<div class="guide-block-right">

</div>
<p><em>Mastery of set operations in relational algebra allows for complex and efficient database queries.</em></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../relational-models/basic-operations.html" class="pagination-link" aria-label="Basic Operations">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Basic Operations</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../relational-models/join-operations.html" class="pagination-link" aria-label="Join Operations">
        <span class="nav-page-text">Join Operations</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>