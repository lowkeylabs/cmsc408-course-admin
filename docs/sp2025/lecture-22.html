<!DOCTYPE html>
<html lang="en"><head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="lecture-22_files/libs/clipboard/clipboard.min.js"></script>
<script src="lecture-22_files/libs/quarto-html/tabby.min.js"></script>
<script src="lecture-22_files/libs/quarto-html/popper.min.js"></script>
<script src="lecture-22_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="lecture-22_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lecture-22_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="lecture-22_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lecture-22_files/libs/quarto-contrib/reveal-header-1.0.0/add_header.js" defer="true"></script>
<link href="lecture-22_files/libs/quarto-contrib/reveal-header-1.0.0/add_header.css" rel="stylesheet">
<link href="lecture-22_files/libs/quarto-contrib/grid-htext-1.0.0/grid_htext.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.42">

  <title>Joins and Selects 2</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="lecture-22_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="lecture-22_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="lecture-22_files/libs/revealjs/dist/theme/quarto-ba3afb5a2be93b52b572f3e3ea6a706a.css">
  <link rel="stylesheet" href="assets/sketch-css.css">
  <link href="lecture-22_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="lecture-22_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="lecture-22_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="lecture-22_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="lecture-22_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="lecture-22_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="lecture-22_files/libs/quarto-diagram/mermaid.min.js"></script>
  <script src="lecture-22_files/libs/quarto-diagram/mermaid-init.js"></script>
  <link href="lecture-22_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
  
  <script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
  <script src="https://toolness.github.io/p5.js-widget/p5-widget.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Joins and Selects 2</h1>
  <p class="subtitle">Lecture 22</p>

<div class="quarto-title-authors">
</div>

  <p class="date">Tuesday - Apr 8, 2025</p>
</section>
<section id="housekeeping" class="slide level2">
<h2>Housekeeping</h2>
<div class="columns">
<div class="column" style="width:5%;">

</div><div class="column" style="width:52%;">
<h3 id="discussion-items">Discussion items</h3>
<ul>
<li><a href="https://virginiacommonwealth.instructure.com/courses/113813/assignments/1072345">Homework 7 - Joining and Reporting</a> - due 4/13, SUN</li>
</ul>
</div><div class="column" style="width:43%;">
<h3 id="lecture-topics">Lecture topics</h3>
<ul>
<li><p><a href="#/homework-7---joining-and-reporting">Homework 7 - Joining and Reporting</a></p></li>
<li><p><a href="#/sql-join-examples">SQL Join Examples</a></p></li>
</ul>
</div></div>
<div style="margin-top:25px">
<p>&nbsp;</p>
</div>

    <style></style>
    <div class="upcoming-calendar">
<table class="caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Module</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Week</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Date</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Day</th>
<th data-quarto-table-cell-role="th">Notes and Lectures</th>
<th data-quarto-table-cell-role="th">Activities and due dates</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">4/8</td>
<td style="text-align: center;">Tue</td>
<td>L22:Joins and Selects 2</td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">4/10</td>
<td style="text-align: center;">Thu</td>
<td>L23:Aggregates 1</td>
<td></td>
</tr>
<tr class="odd">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">4/13</td>
<td style="text-align: center;">Sun</td>
<td></td>
<td>HW7:Joining tables and reporting</td>
</tr>
<tr class="even">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">4/15</td>
<td style="text-align: center;">Tue</td>
<td>L24:Subqueries and WITH 1</td>
<td></td>
</tr>
<tr class="odd">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">4/17</td>
<td style="text-align: center;">Thu</td>
<td>L25:Subqueries and WITH 2</td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">4/20</td>
<td style="text-align: center;">Sun</td>
<td></td>
<td>HW8:SQL Funhouse</td>
</tr>
<tr class="odd">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">15</td>
<td style="text-align: center;">4/22</td>
<td style="text-align: center;">Tue</td>
<td>L26:Views and Indexes</td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">15</td>
<td style="text-align: center;">4/24</td>
<td style="text-align: center;">Thu</td>
<td>L27:Procedures and Functions</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<!-- lecture-block-begin -->
</section>
<section>
<section id="homework-7---joining-and-reporting" class="title-slide slide level1 center">
<h1>Homework 7 - Joining and Reporting</h1>
<!-- # Homework 7 - Joining tables and reporting SP2025 -->
</section>
<section id="homework-7---joining-tables-and-reporting" class="slide level2">
<h2>Homework 7 - Joining tables and reporting</h2>
<p>
<iframe style="width: 900px; height: 350px;" src="https://docs.google.com/document/d/1ct6zyJ50iOvz-xQPgnv28i-tKZBKEB1atwKiIWiRvAs/preview" allowfullscreen="allowfullscreen" allow="geolocation *; microphone *; camera *; midi *; encrypted-media *; autoplay *; clipboard-write *; display-capture *">
</iframe>
</p>
<center>
<a href="https://virginiacommonwealth.instructure.com/courses/113813/assignments/1072345">Homework 7 Canvas Page</a>
</center>
</section>
<section id="homework-7---joining-tables-and-reporting-1" class="slide level2">
<h2>Homework 7 - Joining tables and reporting</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="the-challenge">The Challenge</h3>
<p>Your boss came to you all excited with another one of their great ideas. “I want you to build me a DATABASE!”</p>
<p>Your company consists of a ragtag bunch of designers and developers trying to pay for school by picking up project work under the tutelage of world famous sensei of Kill-Bill fame. Business has been slow and your sensei is looking for ways to jumpstart this frankenstein.</p>
<p>The database will represent a company-wide resume capturing the collective skills and certifications of all the people in your company. The database will capture skills, employees and their roles within the company. The database will help your sensei find employees with specific skills, list the skills of any employee and help find gaps in the skill sets of employees in specific roles.</p>
</div><div class="column" style="width:50%;">
<h3 id="learning-objectives">Learning Objectives</h3>
<ul>
<li><p>In HW7, we’re completing the database started in HW6.</p></li>
<li><p>Adding additional tables and data</p>
<ul>
<li>Copy and modify the DDL file from HW6</li>
<li>Use the <code>report.qmd</code> file as provided.</li>
</ul></li>
<li><p>Introducing integrity constraints</p>
<ul>
<li>Data constraints - value checking on input</li>
<li>Referential constraints - connection checking in INSERT and DELTE</li>
</ul></li>
<li><p>Working all the tools</p>
<ul>
<li>Understanding the workflow(s)</li>
<li>VS code and direct connection</li>
<li>Create and test blocks</li>
<li>Quarto and DB connection</li>
<li>Create entire DB at once</li>
</ul></li>
</ul>
</div></div>
</section>
<section id="homework-7---build-your-database-incrementally" class="slide level2">
<h2>Homework 7 - Build your database incrementally!</h2>
<div class="columns">
<div class="column">
<h3 id="ddl-starter-commands">DDL Starter commands</h3>
<ul>
<li>commands to create the database</li>
<li>DROP TABLE, CREATE TABLE, INSERT INTO</li>
</ul>
<h3 id="data-integrity-constraints">Data integrity constraints</h3>
<ul>
<li>attributes to ensure that only good data gets into the database</li>
<li>Data types: INT, DATE, VARCHAR(255), VARCHAR(4096)</li>
<li>Data attributes: NOT NULL, DEFAULT, UNIQUE, CHECK</li>
<li>Combined attributes PRIMARY KEY, FOREIGN KEY</li>
</ul>
<h3 id="referential-integrity-constraints">Referential integrity constraints</h3>
<ul>
<li>Enforcing cardinality and participation</li>
<li>Ensuring integrity on INSERT and DELETE</li>
<li>Referential attributes: FOREIGN KEY, PRIMARY KEY</li>
<li>Referential actions: ON DELETE, ON UPDATE</li>
</ul>
</div><div class="column">
<h3 id="tips-and-tricks">Tips and tricks</h3>
<ul>
<li><p>Start simple - not too much at once!</p></li>
<li><p>You <em>don’t need</em> primary keys, foreign keys or unique field constraints.</p></li>
<li><p>They are all OPTIONAL and can added later.</p></li>
<li><p>You can do “joins” without primary and foreign key, just use caution.</p></li>
<li><p>Tables and records connect on values in the table.</p></li>
<li><p>Primary keys, foreign keys and UNIQUE are your friends, don’t ignore them. With them, you can trust your database.</p></li>
</ul>
</div></div>
</section></section>
<section>
<section id="sql-join-examples" class="title-slide slide level1 center">
<h1>SQL Join Examples</h1>
<!-- # SQL Joins - Examples -->
</section>
<section id="exploring-joins---a-sandbox-schema" class="slide level2">
<h2>Exploring Joins - a sandbox schema</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="sandbox-schema">Sandbox schema</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb1-1"><a href=""></a>drop table if exists peopleskills;</span>
<span id="cb1-2"><a href=""></a>drop table if exists people;</span>
<span id="cb1-3"><a href=""></a>create table people (</span>
<span id="cb1-4"><a href=""></a>    id int,</span>
<span id="cb1-5"><a href=""></a>    name varchar(20) NOT NULL,</span>
<span id="cb1-6"><a href=""></a>    primary key(id)</span>
<span id="cb1-7"><a href=""></a>);</span>
<span id="cb1-8"><a href=""></a>insert into people (id,name) values</span>
<span id="cb1-9"><a href=""></a>( 101,'Omar'),</span>
<span id="cb1-10"><a href=""></a>( 102,'Layla'),</span>
<span id="cb1-11"><a href=""></a>( 103,'Alex');</span>
<span id="cb1-12"><a href=""></a></span>
<span id="cb1-13"><a href=""></a>drop table if exists skills;</span>
<span id="cb1-14"><a href=""></a>create table skills (</span>
<span id="cb1-15"><a href=""></a>    id int primary key,</span>
<span id="cb1-16"><a href=""></a>    name varchar(20) NOT NULL</span>
<span id="cb1-17"><a href=""></a>);</span>
<span id="cb1-18"><a href=""></a>insert into skills (id,name) values</span>
<span id="cb1-19"><a href=""></a>( 201,'Jumping'),</span>
<span id="cb1-20"><a href=""></a>( 202,'Skipping'),</span>
<span id="cb1-21"><a href=""></a>( 203,'Coding')</span>
<span id="cb1-22"><a href=""></a>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:50%;">
<h3 id="sample-schema">Sample Schema</h3>
<ul>
<li><p>People - contains a simple ID and name</p></li>
<li><p>Skills - contains a simple ID and name</p></li>
</ul>
<h3 id="notes">Notes</h3>
<ul>
<li><p>I PURPOSEFULLY am using the same field names in each table. This will force us to more carefully specify fields in our queries.</p></li>
<li><p>I suggest that you try these commands in VS Code.</p></li>
<li><p>Note that you may already have tables using the same names in your existing schema! You need to delete the old tables to clear out the entire schema.</p></li>
<li><p>When deleting old tables, look out for foreign key constraint errors.<br>
</p></li>
</ul>
</div></div>
</section>
<section id="exploring-joins---the-data" class="slide level2">
<h2>Exploring Joins - the data</h2>
<h3 id="quick-look-people">Quick look <em>people</em></h3>
<div class="columns">
<div class="column">
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb2-1"><a href=""></a>select * from people</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div id="c79853e1" class="cell" data-execution_count="7">
<div class="cell-output cell-output-display" data-execution_count="7">
<table border="1" class="dataframe">

<thead>

<tr style="text-align: center;">

<th>
id
</th>

<th>
name
</th>

</tr>

</thead>

<tbody>

<tr>

<td>
101
</td>

<td>
Omar
</td>

</tr>

<tr>

<td>
102
</td>

<td>
Layla
</td>

</tr>

<tr>

<td>
103
</td>

<td>
Alex
</td>

</tr>

</tbody>

</table>
</div>
</div>
</div></div>
<h3 id="quick-look-skills">Quick look <em>skills</em></h3>
<div class="columns">
<div class="column">
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb3-1"><a href=""></a>select * from skills</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div id="ed903198" class="cell" data-execution_count="8">
<div class="cell-output cell-output-display" data-execution_count="8">
<table border="1" class="dataframe">

<thead>

<tr style="text-align: center;">

<th>
id
</th>

<th>
name
</th>

</tr>

</thead>

<tbody>

<tr>

<td>
201
</td>

<td>
Jumping
</td>

</tr>

<tr>

<td>
202
</td>

<td>
Skipping
</td>

</tr>

<tr>

<td>
203
</td>

<td>
Coding
</td>

</tr>

</tbody>

</table>
</div>
</div>
</div></div>
</section>
<section id="exploring-joins---cross-products" class="slide level2">
<h2>Exploring Joins - cross-products</h2>
<h3 id="a-cross-product-join-no-on">A cross-product join (no ON)</h3>
<div class="columns">
<div class="column">
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb4-1"><a href=""></a>select</span>
<span id="cb4-2"><a href=""></a>  *</span>
<span id="cb4-3"><a href=""></a>from</span>
<span id="cb4-4"><a href=""></a>  people a, skills b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="notes-1">Notes</h3>
<ul>
<li><p>the <code>*</code> returns all fields across all tables without having to name them.</p></li>
<li><p>Returns all combinations of records across both tables</p></li>
<li><p>Note that the names match in these slides.</p></li>
</ul>
</div><div class="column">
<div id="0778ace4" class="cell" data-execution_count="9">
<div class="cell-output cell-output-display" data-execution_count="9">
<table border="1" class="dataframe">

<thead>

<tr style="text-align: center;">

<th>
id
</th>

<th>
name
</th>

<th>
id
</th>

<th>
name
</th>

</tr>

</thead>

<tbody>

<tr>

<td>
103
</td>

<td>
Alex
</td>

<td>
201
</td>

<td>
Jumping
</td>

</tr>

<tr>

<td>
102
</td>

<td>
Layla
</td>

<td>
201
</td>

<td>
Jumping
</td>

</tr>

<tr>

<td>
101
</td>

<td>
Omar
</td>

<td>
201
</td>

<td>
Jumping
</td>

</tr>

<tr>

<td>
103
</td>

<td>
Alex
</td>

<td>
202
</td>

<td>
Skipping
</td>

</tr>

<tr>

<td>
102
</td>

<td>
Layla
</td>

<td>
202
</td>

<td>
Skipping
</td>

</tr>

<tr>

<td>
101
</td>

<td>
Omar
</td>

<td>
202
</td>

<td>
Skipping
</td>

</tr>

<tr>

<td>
103
</td>

<td>
Alex
</td>

<td>
203
</td>

<td>
Coding
</td>

</tr>

<tr>

<td>
102
</td>

<td>
Layla
</td>

<td>
203
</td>

<td>
Coding
</td>

</tr>

<tr>

<td>
101
</td>

<td>
Omar
</td>

<td>
203
</td>

<td>
Coding
</td>

</tr>

</tbody>

</table>
</div>
</div>
</div></div>
</section>
<section id="exploring-joins---connecting-people-and-skills" class="slide level2">
<h2>Exploring Joins - connecting people and skills</h2>
<div class="columns">
<div class="column">
<h3 id="how-do-we-associate-people-and-skills">How do we associate people and skills?</h3>
<p>
&nbsp;
</p>
<p>A key part of database design is properly translating our ER diagrams to SQL.</p>
<p>We spent lots of time talking about <em>cardinality</em> and <em>participation</em>, that is, how different entities connect to each other.</p>
<p>Learning how to represent <em>cardinality</em> and <em>participation</em> in SQL is critical to your success as a database engineer.</p>
<p>We’ve been using <em>keys</em> to make these connections in our ER diagrams.</p>
</div><div class="column">
<h3 id="cardinalty-and-participation">Cardinalty and Participation</h3>
<p>Think about our options for connecting people and skills.</p>
<ul>
<li><p>A person MUST have one and only one skill.</p></li>
<li><p>A person may have one skill or no skills.</p></li>
<li><p>A person can have many skills (more than one).</p></li>
</ul>
<p>How would you code these instances in SQL?</p>
</div></div>
</section>
<section id="exploring-joins---connect-people-to-skills" class="slide level2">
<h2>Exploring Joins - connect people to skills</h2>
<div class="columns">
<div class="column" style="width:60%;">
<h3 id="using-a-field-to-contain-the-id-of-the-skill">Using a field to contain the id of the skill</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb5-1"><a href=""></a>drop table if exists people;</span>
<span id="cb5-2"><a href=""></a>create table people (</span>
<span id="cb5-3"><a href=""></a>    id int primary key,</span>
<span id="cb5-4"><a href=""></a>    name varchar(20) NOT NULL,</span>
<span id="cb5-5"><a href=""></a>    skill_id int NULL</span>
<span id="cb5-6"><a href=""></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>FOREIGN KEY specifier isn’t necessary</li>
<li>NULL or NOT NULL specifies none-or-one or exactly-one</li>
</ul>
<h3 id="adding-a-foreign-key-helper">Adding a FOREIGN KEY helper</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb6-1"><a href=""></a>drop table if exists people;</span>
<span id="cb6-2"><a href=""></a>create table people (</span>
<span id="cb6-3"><a href=""></a>    id int primary key,</span>
<span id="cb6-4"><a href=""></a>    name varchar(20) NOT NULL,</span>
<span id="cb6-5"><a href=""></a>    skill_id int NOT NULL,</span>
<span id="cb6-6"><a href=""></a>    foreign key (skill_id) references skills(id)</span>
<span id="cb6-7"><a href=""></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>FOREIGN KEY is a helper that will manage relationships between the two tables</li>
<li>Foreign key statement will ensure skills_id always points to an existing skill.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">erDiagram
    PEOPLE {
        int id PK
        varchar name
        int skill_id FK
    }

    SKILLS {
        int id PK
        varchar name
    }

    PEOPLE o|..|o SKILLS : "has"
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<h3 id="in-this-example">In this example …</h3>
<ul>
<li>People keeps track of their skill.</li>
<li>A person can have only one or no skills.</li>
<li>Skills doesn’t <em>know</em> anything about people.</li>
</ul>
</div></div>
</section>
<section id="exploring-joins---connect-people-to-skills-1" class="slide level2">
<h2>Exploring Joins - connect people to skills</h2>
<div class="columns">
<div class="column">
<h3 id="adding-none-or-one-skills">Adding none-or-one skills</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb7-1"><a href=""></a>drop table if exists people;</span>
<span id="cb7-2"><a href=""></a>create table people (</span>
<span id="cb7-3"><a href=""></a>    id int primary key,</span>
<span id="cb7-4"><a href=""></a>    name varchar(20) NOT NULL,</span>
<span id="cb7-5"><a href=""></a>    skills_id int NULL,</span>
<span id="cb7-6"><a href=""></a>    foreign key (skills_id) references skills(id)</span>
<span id="cb7-7"><a href=""></a>      on delete set NULL</span>
<span id="cb7-8"><a href=""></a>      on update cascade</span>
<span id="cb7-9"><a href=""></a>);</span>
<span id="cb7-10"><a href=""></a>insert into people (id,name, skills_id) values</span>
<span id="cb7-11"><a href=""></a>( 101,'Omar', 201),</span>
<span id="cb7-12"><a href=""></a>( 102,'Layla', NULL),</span>
<span id="cb7-13"><a href=""></a>( 103,'Alex', 203);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="notes-2">Notes</h3>
<ul>
<li><p>We’re adding <em>skills_id</em> to people so that each person can track none-or-one skills.</p></li>
<li><p>The <em>foreign key</em> constraint tells the database what happens to the <em>skills_id</em> field when the matching record in <em>skills</em> is changed.</p></li>
</ul>
</div><div class="column">
<h3 id="who-has-what-skills">Who has what skills?</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb8-1"><a href=""></a>select</span>
<span id="cb8-2"><a href=""></a>  people.id,</span>
<span id="cb8-3"><a href=""></a>  people.name,</span>
<span id="cb8-4"><a href=""></a>  people.skills_id,</span>
<span id="cb8-5"><a href=""></a>  skills.id,</span>
<span id="cb8-6"><a href=""></a>  skills.name</span>
<span id="cb8-7"><a href=""></a>from</span>
<span id="cb8-8"><a href=""></a>  people </span>
<span id="cb8-9"><a href=""></a>    join skills on (people.skills_id = skills.id )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>
&nbsp;
</p>
<div id="adf6aeee" class="cell" data-execution_count="11">
<div class="cell-output cell-output-display" data-execution_count="11">
<table border="1" class="dataframe">

<thead>

<tr style="text-align: center;">

<th>
id
</th>

<th>
name
</th>

<th>
skills_id
</th>

<th>
id
</th>

<th>
name
</th>

</tr>

</thead>

<tbody>

<tr>

<td>
101
</td>

<td>
Omar
</td>

<td>
201
</td>

<td>
201
</td>

<td>
Jumping
</td>

</tr>

<tr>

<td>
103
</td>

<td>
Alex
</td>

<td>
203
</td>

<td>
203
</td>

<td>
Coding
</td>

</tr>

</tbody>

</table>
</div>
</div>
<h3 id="notes-3">Notes</h3>
<p>Wait - aren’t there 3 people? Where is person 102?</p>
</div></div>
</section>
<section id="exploring-joins---inner-vs-left" class="slide level2">
<h2>Exploring Joins - Inner vs Left</h2>
<div class="columns">
<div class="column">
<h3 id="who-has-what-skills-inner-join">Who has what skills? (INNER JOIN)</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb9-1"><a href=""></a>select</span>
<span id="cb9-2"><a href=""></a>  people.id,</span>
<span id="cb9-3"><a href=""></a>  people.name,</span>
<span id="cb9-4"><a href=""></a>  people.skills_id,</span>
<span id="cb9-5"><a href=""></a>  skills.id,</span>
<span id="cb9-6"><a href=""></a>  skills.name</span>
<span id="cb9-7"><a href=""></a>from</span>
<span id="cb9-8"><a href=""></a>  people </span>
<span id="cb9-9"><a href=""></a>    INNER JOIN skills on (people.skills_id = skills.id )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>
&nbsp;
</p>
<div id="153eeaeb" class="cell" data-execution_count="12">
<div class="cell-output cell-output-display" data-execution_count="12">
<table border="1" class="dataframe">

<thead>

<tr style="text-align: center;">

<th>
id
</th>

<th>
name
</th>

<th>
skills_id
</th>

<th>
id
</th>

<th>
name
</th>

</tr>

</thead>

<tbody>

<tr>

<td>
101
</td>

<td>
Omar
</td>

<td>
201
</td>

<td>
201
</td>

<td>
Jumping
</td>

</tr>

<tr>

<td>
103
</td>

<td>
Alex
</td>

<td>
203
</td>

<td>
203
</td>

<td>
Coding
</td>

</tr>

</tbody>

</table>
</div>
</div>
<h3 id="notes-4">Notes</h3>
<ul>
<li><code>INNER JOIN</code> only returns records that match in BOTH tables. If no match, nothing is returned.</li>
</ul>
</div><div class="column">
<h3 id="who-has-what-skills-left-join">Who has what skills? (LEFT JOIN)</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb10-1"><a href=""></a>select</span>
<span id="cb10-2"><a href=""></a>  people.id,</span>
<span id="cb10-3"><a href=""></a>  people.name,</span>
<span id="cb10-4"><a href=""></a>  people.skills_id,</span>
<span id="cb10-5"><a href=""></a>  skills.id,</span>
<span id="cb10-6"><a href=""></a>  skills.name</span>
<span id="cb10-7"><a href=""></a>from</span>
<span id="cb10-8"><a href=""></a>  people </span>
<span id="cb10-9"><a href=""></a>    LEFT JOIN skills on (people.skills_id = skills.id )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>
&nbsp;
</p>
<div id="a8894a64" class="cell" data-execution_count="13">
<div class="cell-output cell-output-display" data-execution_count="13">
<table border="1" class="dataframe">

<thead>

<tr style="text-align: center;">

<th>
id
</th>

<th>
name
</th>

<th>
skills_id
</th>

<th>
id
</th>

<th>
name
</th>

</tr>

</thead>

<tbody>

<tr>

<td>
101
</td>

<td>
Omar
</td>

<td>
201.0
</td>

<td>
201.0
</td>

<td>
Jumping
</td>

</tr>

<tr>

<td>
102
</td>

<td>
Layla
</td>

<td>
</td>

<td>
</td>

<td>
None
</td>

</tr>

<tr>

<td>
103
</td>

<td>
Alex
</td>

<td>
203.0
</td>

<td>
203.0
</td>

<td>
Coding
</td>

</tr>

</tbody>

</table>
</div>
</div>
<h3 id="notes-5">Notes</h3>
<ul>
<li>The <code>LEFT JOIN</code> requires that all records from the first (left) table MUST be listed at least once.</li>
<li>If no match, then NULL values are returned in fields.</li>
</ul>
</div></div>
</section>
<section id="exploring-joins---one-to-many-in-sql" class="slide level2">
<h2>Exploring Joins - One-to-Many in SQL</h2>
<div class="columns">
<div class="column">
<h3 id="hard-coded-reference"><em>Hard-coded</em> reference</h3>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">erDiagram
    PEOPLE {
        int id PK
        varchar name
        int skill_id FK
    }

    SKILLS {
        int id PK
        varchar name
    }

    PEOPLE o|..|o SKILLS : "has"
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li><em>people</em> contains reference to <em>skills</em></li>
<li>Example of <em>polluted</em> table.</li>
<li>How would a person have multiple skills?</li>
</ul>
</div><div class="column">
<h3 id="join-table-example"><em>Join table</em> example</h3>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">erDiagram
    PEOPLE {
        int id PK
        varchar name
    }

    PEOPLESKILLS{
      int ID PK
      int people_id FK
      int skills_id FK
    }

    SKILLS {
        int id PK
        varchar name
    }

    PEOPLESKILLS }o..o{ PEOPLE : "has"
    PEOPLESKILLS }o..o{ SKILLS : "has"
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li><em>people</em> and <em>skills</em> don’t know other each other</li>
<li><em>Join table</em> (or <em>helper table</em>) contains pairs of people and skills</li>
<li>Data are separate from references. Easy to edit!</li>
</ul>
</div></div>
</section>
<section id="exploring-joins---one-to-many-in-sql-1" class="slide level2">
<h2>Exploring Joins - One-to-Many in SQL</h2>
<p>Moving from <code>none-to-one</code> to <code>one-to-many</code> requires a helper table.</p>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="none-to-one">None-to-One</h3>
<p>To model this case, we added a foreign key directly into the <em>people</em> table.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb11-1"><a href=""></a>drop table if exists people;</span>
<span id="cb11-2"><a href=""></a>create table people (</span>
<span id="cb11-3"><a href=""></a>    id int primary key,</span>
<span id="cb11-4"><a href=""></a>    name varchar(20) NOT NULL,</span>
<span id="cb11-5"><a href=""></a>    skill_id int NOT NULL,</span>
<span id="cb11-6"><a href=""></a>    foreign key (skill_id) references skills(id)</span>
<span id="cb11-7"><a href=""></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="notes-6">Notes</h3>
<ul>
<li><p>This approach pollutes the people table. It now contains non-people related information.</p></li>
<li><p>We can only have non-or-one skills.</p></li>
<li><p>How can we have more than one skill?</p></li>
</ul>
</div><div class="column">
<h3 id="one-to-many">One to Many</h3>
<p>To model MANY we add a helper (join) table that serves to associate people and skills.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb12-1"><a href=""></a>drop table if exists peopleskills;</span>
<span id="cb12-2"><a href=""></a>create table peopleskills (</span>
<span id="cb12-3"><a href=""></a>    id int auto_increment primary key,</span>
<span id="cb12-4"><a href=""></a>    people_id int NOT NULL,</span>
<span id="cb12-5"><a href=""></a>    skills_id int NOT NULL,</span>
<span id="cb12-6"><a href=""></a>    foreign key (people_id) references people(id)</span>
<span id="cb12-7"><a href=""></a>      on delete cascade on update cascade,</span>
<span id="cb12-8"><a href=""></a>    foreign key (skills_id) references skills(id)</span>
<span id="cb12-9"><a href=""></a>      on delete cascade on update cascade</span>
<span id="cb12-10"><a href=""></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="notes-7">Notes</h3>
<ul>
<li><p>We remove any skills references from people, unpolluting it.</p></li>
<li><p>We associate people with skills through this table.</p></li>
<li><p>More records means MANY connections.</p></li>
</ul>
</div></div>
</section>
<section id="exploring-joins---one-to-many-in-sql-2" class="slide level2">
<h2>Exploring Joins - One-to-Many in SQL</h2>
<p>Moving from <code>none-to-one</code> to <code>one-to-many</code> requires a helper table.</p>
<div class="columns">
<div class="column">
<h3 id="creating-the-helper-table">Creating the helper table</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb13-1"><a href=""></a>drop table if exists peopleskills;</span>
<span id="cb13-2"><a href=""></a>create table peopleskills (</span>
<span id="cb13-3"><a href=""></a>    id int auto_increment primary key,</span>
<span id="cb13-4"><a href=""></a>    people_id int NOT NULL,</span>
<span id="cb13-5"><a href=""></a>    skills_id int NOT NULL,</span>
<span id="cb13-6"><a href=""></a>    foreign key (people_id) references people(id)</span>
<span id="cb13-7"><a href=""></a>      on delete cascade on update cascade,</span>
<span id="cb13-8"><a href=""></a>    foreign key (skills_id) references skills(id)</span>
<span id="cb13-9"><a href=""></a>      on delete cascade on update cascade</span>
<span id="cb13-10"><a href=""></a>);</span>
<span id="cb13-11"><a href=""></a></span>
<span id="cb13-12"><a href=""></a>insert into peopleskills (people_id,skills_id) values </span>
<span id="cb13-13"><a href=""></a>(101, 201),</span>
<span id="cb13-14"><a href=""></a>(103, 203);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<h3 id="using-the-join-helper-table">Using the join helper table</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb14-1"><a href=""></a>select </span>
<span id="cb14-2"><a href=""></a>  peopleskills.*,</span>
<span id="cb14-3"><a href=""></a>  people.name,</span>
<span id="cb14-4"><a href=""></a>  skills.name</span>
<span id="cb14-5"><a href=""></a>from</span>
<span id="cb14-6"><a href=""></a>  peopleskills</span>
<span id="cb14-7"><a href=""></a>    join people on (peopleskills.people_id=people.id)</span>
<span id="cb14-8"><a href=""></a>    join skills on (peopleskills.skills_id=skills.id);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>
&nbsp;
</p>
<div id="4091f59a" class="cell" data-execution_count="15">
<div class="cell-output cell-output-display" data-execution_count="15">
<table border="1" class="dataframe">

<thead>

<tr style="text-align: center;">

<th>
id
</th>

<th>
people_id
</th>

<th>
skills_id
</th>

<th>
name
</th>

<th>
name
</th>

</tr>

</thead>

<tbody>

<tr>

<td>
1
</td>

<td>
101
</td>

<td>
201
</td>

<td>
Omar
</td>

<td>
Jumping
</td>

</tr>

<tr>

<td>
2
</td>

<td>
103
</td>

<td>
203
</td>

<td>
Alex
</td>

<td>
Coding
</td>

</tr>

</tbody>

</table>
</div>
</div>
</div></div>
</section>
<section id="exploring-joins---one-to-many-in-sql-3" class="slide level2">
<h2>Exploring Joins - One-to-Many in SQL</h2>
<div class="columns">
<div class="column">
<h3 id="adding-multiple-skills">Adding multiple skills</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb15-1"><a href=""></a>drop table if exists peopleskills;</span>
<span id="cb15-2"><a href=""></a>create table peopleskills (</span>
<span id="cb15-3"><a href=""></a>    id int auto_increment primary key,</span>
<span id="cb15-4"><a href=""></a>    people_id int NOT NULL,</span>
<span id="cb15-5"><a href=""></a>    skills_id int NOT NULL,</span>
<span id="cb15-6"><a href=""></a>    foreign key (people_id) references people(id)</span>
<span id="cb15-7"><a href=""></a>      on delete cascade on update cascade,</span>
<span id="cb15-8"><a href=""></a>    foreign key (skills_id) references skills(id)</span>
<span id="cb15-9"><a href=""></a>      on delete cascade on update cascade</span>
<span id="cb15-10"><a href=""></a>);</span>
<span id="cb15-11"><a href=""></a></span>
<span id="cb15-12"><a href=""></a>insert into peopleskills (people_id,skills_id) values </span>
<span id="cb15-13"><a href=""></a>(101, 201),</span>
<span id="cb15-14"><a href=""></a>(101, 202),</span>
<span id="cb15-15"><a href=""></a>(103, 201),</span>
<span id="cb15-16"><a href=""></a>(103, 203);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="notes-8">Notes</h3>
<ul>
<li>To add multiple skills, we add more <code>people-skill</code> pairs.</li>
</ul>
</div><div class="column">
<h3 id="using-the-helper-table">Using the helper table</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb16-1"><a href=""></a>select </span>
<span id="cb16-2"><a href=""></a>  peopleskills.*,</span>
<span id="cb16-3"><a href=""></a>  people.name,</span>
<span id="cb16-4"><a href=""></a>  skills.name</span>
<span id="cb16-5"><a href=""></a>from</span>
<span id="cb16-6"><a href=""></a>  peopleskills</span>
<span id="cb16-7"><a href=""></a>    join people on (peopleskills.people_id=people.id)</span>
<span id="cb16-8"><a href=""></a>    join skills on (peopleskills.skills_id=skills.id);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>
&nbsp;
</p>
<div id="3446248a" class="cell" data-execution_count="17">
<div class="cell-output cell-output-display" data-execution_count="17">
<table border="1" class="dataframe">

<thead>

<tr style="text-align: center;">

<th>
id
</th>

<th>
people_id
</th>

<th>
skills_id
</th>

<th>
name
</th>

<th>
name
</th>

</tr>

</thead>

<tbody>

<tr>

<td>
1
</td>

<td>
101
</td>

<td>
201
</td>

<td>
Omar
</td>

<td>
Jumping
</td>

</tr>

<tr>

<td>
2
</td>

<td>
101
</td>

<td>
202
</td>

<td>
Omar
</td>

<td>
Skipping
</td>

</tr>

<tr>

<td>
3
</td>

<td>
103
</td>

<td>
201
</td>

<td>
Alex
</td>

<td>
Jumping
</td>

</tr>

<tr>

<td>
4
</td>

<td>
103
</td>

<td>
203
</td>

<td>
Alex
</td>

<td>
Coding
</td>

</tr>

</tbody>

</table>
</div>
</div>
</div></div>
</section>
<section id="exploring-joins---enforcing-participation" class="slide level2">
<h2>Exploring Joins - Enforcing participation</h2>
<div class="columns">
<div class="column">
<h3 id="single-use-people-and-skills"><em>Single-use</em> people and skills</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb17-1"><a href=""></a>drop table if exists peopleskills;</span>
<span id="cb17-2"><a href=""></a>create table peopleskills (</span>
<span id="cb17-3"><a href=""></a>    id int auto_increment primary key,</span>
<span id="cb17-4"><a href=""></a>    people_id int NOT NULL UNIQUE,</span>
<span id="cb17-5"><a href=""></a>    skills_id int NOT NULL UNIQUE,</span>
<span id="cb17-6"><a href=""></a>    foreign key (people_id) references people(id)</span>
<span id="cb17-7"><a href=""></a>      on delete cascade on update cascade,</span>
<span id="cb17-8"><a href=""></a>    foreign key (skills_id) references skills(id)</span>
<span id="cb17-9"><a href=""></a>      on delete cascade on update cascade</span>
<span id="cb17-10"><a href=""></a>);</span>
<span id="cb17-11"><a href=""></a></span>
<span id="cb17-12"><a href=""></a>insert into peopleskills (people_id,skills_id) values </span>
<span id="cb17-13"><a href=""></a>(101, 201),</span>
<span id="cb17-14"><a href=""></a>(101, 202),</span>
<span id="cb17-15"><a href=""></a>(103, 201),</span>
<span id="cb17-16"><a href=""></a>(103, 203);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="notes-9">Notes</h3>
<ul>
<li><p>Using <code>UNIQUE</code> on <code>people_id</code> or <code>skills_id</code> enforces that only one value can exist in the <code>peopleskills</code> table.</p></li>
<li><p>A person can only be listed in people-skills only once.</p></li>
<li><p>A skill can only be listed in people-skills only once.</p></li>
<li><p>The <code>INSERT</code> statement above will throw errors because of the duplicate <code>101</code>, <code>103</code> and <code>201</code> values.</p></li>
</ul>
</div><div class="column">
<h3 id="one-to-one---preventing-duplicate-pairs">One-to-one - preventing duplicate pairs</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb18-1"><a href=""></a>drop table if exists peopleskills;</span>
<span id="cb18-2"><a href=""></a>create table peopleskills (</span>
<span id="cb18-3"><a href=""></a>    id int auto_increment primary key,</span>
<span id="cb18-4"><a href=""></a>    people_id int NOT NULL UNIQUE,</span>
<span id="cb18-5"><a href=""></a>    skills_id int NOT NULL UNIQUE,</span>
<span id="cb18-6"><a href=""></a>    UNIQUE (people_id, skills_id),</span>
<span id="cb18-7"><a href=""></a>    foreign key (people_id) references people(id)</span>
<span id="cb18-8"><a href=""></a>      on delete cascade on update cascade,</span>
<span id="cb18-9"><a href=""></a>    foreign key (skills_id) references skills(id)</span>
<span id="cb18-10"><a href=""></a>      on delete cascade on update cascade</span>
<span id="cb18-11"><a href=""></a>);</span>
<span id="cb18-12"><a href=""></a></span>
<span id="cb18-13"><a href=""></a>insert into peopleskills (people_id,skills_id) values </span>
<span id="cb18-14"><a href=""></a>(101, 201),</span>
<span id="cb18-15"><a href=""></a>(101, 202),</span>
<span id="cb18-16"><a href=""></a>(101, 201);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="notes-10">Notes</h3>
<ul>
<li><p>Using <code>UNIQUE</code> keyword on multiple values, tells the DBMS to check and toss an error if duplicate <code>pairs</code> are found.</p></li>
<li><p>This is enforced on INSERTs and UPDATES.</p></li>
<li><p>The <code>INSERT</code> statement will throw an error on <code>101-201</code></p></li>
</ul>
</div></div>
</section>
<section id="exploring-joins---allowing-many-to-many" class="slide level2">
<h2>Exploring Joins - Allowing many-to-many</h2>
<div class="columns">
<div class="column">
<h3 id="many-to-many-one-to-many-many-to-one">Many-to-many, one-to-many, many-to-one</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb19-1"><a href=""></a>drop table if exists peopleskills;</span>
<span id="cb19-2"><a href=""></a>create table peopleskills (</span>
<span id="cb19-3"><a href=""></a>    id int auto_increment primary key,</span>
<span id="cb19-4"><a href=""></a>    people_id int NOT NULL,</span>
<span id="cb19-5"><a href=""></a>    skills_id int NOT NULL,</span>
<span id="cb19-6"><a href=""></a>    foreign key (people_id) references people(id)</span>
<span id="cb19-7"><a href=""></a>      on delete cascade on update cascade,</span>
<span id="cb19-8"><a href=""></a>    foreign key (skills_id) references skills(id)</span>
<span id="cb19-9"><a href=""></a>      on delete cascade on update cascade</span>
<span id="cb19-10"><a href=""></a>);</span>
<span id="cb19-11"><a href=""></a></span>
<span id="cb19-12"><a href=""></a>insert into peopleskills (people_id,skills_id) values </span>
<span id="cb19-13"><a href=""></a>(101, 201),</span>
<span id="cb19-14"><a href=""></a>(101, 202),</span>
<span id="cb19-15"><a href=""></a>(103, 201),</span>
<span id="cb19-16"><a href=""></a>(103, 203);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="notes-11">Notes</h3>
<ul>
<li><p>UNIQUE - cardinality: 1 or many</p></li>
<li><p>NOT NULL or NULL - participation</p></li>
<li><p>What happens with different combos of UNIQUE, NOT NULL?</p></li>
</ul>
</div><div class="column">
<h3 id="many-to-many---preventing-duplicate-pairs">Many-to-many - preventing duplicate pairs</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource {sql} number-lines code-with-copy"><code class="sourceCode"><span id="cb20-1"><a href=""></a>drop table if exists peopleskills;</span>
<span id="cb20-2"><a href=""></a>create table peopleskills (</span>
<span id="cb20-3"><a href=""></a>    id int auto_increment primary key,</span>
<span id="cb20-4"><a href=""></a>    people_id int NOT NULL,</span>
<span id="cb20-5"><a href=""></a>    skills_id int NOT NULL,</span>
<span id="cb20-6"><a href=""></a>    UNIQUE (people_id, skills_id),</span>
<span id="cb20-7"><a href=""></a>    foreign key (people_id) references people(id)</span>
<span id="cb20-8"><a href=""></a>      on delete cascade on update cascade,</span>
<span id="cb20-9"><a href=""></a>    foreign key (skills_id) references skills(id)</span>
<span id="cb20-10"><a href=""></a>      on delete cascade on update cascade</span>
<span id="cb20-11"><a href=""></a>);</span>
<span id="cb20-12"><a href=""></a></span>
<span id="cb20-13"><a href=""></a>insert into peopleskills (people_id,skills_id) values </span>
<span id="cb20-14"><a href=""></a>(101, 201),</span>
<span id="cb20-15"><a href=""></a>(101, 202),</span>
<span id="cb20-16"><a href=""></a>(101, 201);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="notes-12">Notes</h3>
<ul>
<li><p>Using <code>UNIQUE</code> keyword on multiple values, tells the DBMS to check and toss an error if duplicate <code>pairs</code> are found.</p></li>
<li><p>This is enforced on INSERTs and UPDATES.</p></li>
<li><p>The <code>INSERT</code> statement will throw an error on <code>101-201</code></p></li>
</ul>
</div></div>
</section>
<section id="exploring-joins" class="slide level2">
<h2>Exploring Joins</h2>
<ul>
<li><p>A join table is the preferred way to model relationships in SQL.</p></li>
<li><p>Using appropriate modifiers <code>NULL</code>, <code>NOT NULL</code>, and <code>UNIQUE</code> we can model:</p>
<ul>
<li>One-to-One,</li>
<li>None-to-One,</li>
<li>One-toMany,</li>
<li>None-to-Many</li>
</ul></li>
<li><p>Keeping relationships in a join table minimizes pollution in the primary tables</p></li>
<li><p>Keeping relationships outside of database promotes easier UI/UX development.</p></li>
</ul>
</section>
<section id="exploring-joins---a-missing-piece" class="slide level2">
<h2>Exploring Joins - a missing piece</h2>
<p><strong>Issue</strong> Ensuring that every person has <em>at least one</em> skill, or that every skill is used <em>at least once</em>.</p>
<p><strong>Solution</strong> We need a way to verify that every <em>people_id</em> is listed at least once in <em>people_skills</em> and/or every <em>skills_id</em> is listed at least once in <em>people_skills</em></p>
<p><strong>Notes</strong></p>
<ul>
<li>Our current toolset of integrity containts cannot enforce <em>forward looking</em> constraints.</li>
<li>We need other strategies for attacking this, including <em>application</em> or <em>business-logic</em> enforcement strategies.</li>
<li>This challenge is <em>much</em> trickier - and will be saved for much later.</li>
</ul>
<!-- lecture-block-end -->
</section>
<section id="housekeeping-1" class="slide level2">
<h2>Housekeeping</h2>
<div class="columns">
<div class="column" style="width:5%;">

</div><div class="column" style="width:52%;">
<h3 id="discussion-items-1">Discussion items</h3>
<ul>
<li><a href="https://virginiacommonwealth.instructure.com/courses/113813/assignments/1072345">Homework 7 - Joining and Reporting</a> - due 4/13, SUN</li>
</ul>
</div><div class="column" style="width:43%;">
<h3 id="lecture-topics-1">Lecture topics</h3>
<ul>
<li><p><a href="#/homework-7---joining-and-reporting">Homework 7 - Joining and Reporting</a></p></li>
<li><p><a href="#/sql-join-examples">SQL Join Examples</a></p></li>
</ul>
</div></div>
<div style="margin-top:25px">
<p>&nbsp;</p>
</div>

    <style></style>
    <div class="upcoming-calendar">
<table class="caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Module</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Week</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Date</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Day</th>
<th data-quarto-table-cell-role="th">Notes and Lectures</th>
<th data-quarto-table-cell-role="th">Activities and due dates</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">4/8</td>
<td style="text-align: center;">Tue</td>
<td>L22:Joins and Selects 2</td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">4/10</td>
<td style="text-align: center;">Thu</td>
<td>L23:Aggregates 1</td>
<td></td>
</tr>
<tr class="odd">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">4/13</td>
<td style="text-align: center;">Sun</td>
<td></td>
<td>HW7:Joining tables and reporting</td>
</tr>
<tr class="even">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">4/15</td>
<td style="text-align: center;">Tue</td>
<td>L24:Subqueries and WITH 1</td>
<td></td>
</tr>
<tr class="odd">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">4/17</td>
<td style="text-align: center;">Thu</td>
<td>L25:Subqueries and WITH 2</td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">4/20</td>
<td style="text-align: center;">Sun</td>
<td></td>
<td>HW8:SQL Funhouse</td>
</tr>
<tr class="odd">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">15</td>
<td style="text-align: center;">4/22</td>
<td style="text-align: center;">Tue</td>
<td>L26:Views and Indexes</td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: center;">SQL II</td>
<td style="text-align: center;">15</td>
<td style="text-align: center;">4/24</td>
<td style="text-align: center;">Thu</td>
<td>L27:Procedures and Functions</td>
<td></td>
</tr>
</tbody>
</table>
</div>

<div class="reveal-header">
<div class="header-logo">
<img data-src="assets/CS-icon-with-dept-name-white-2.png">
</div>
<div class="sc-title">
<p> </p>
</div>
<div class="header-text">
<p>CMSC 408 - Databases</p>
</div>
<div class="sb-title">
<p> </p>
</div>
</div>
</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="assets/CS-icon-01.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="lecture-22_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="lecture-22_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="lecture-22_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="lecture-22_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="lecture-22_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="lecture-22_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="lecture-22_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="lecture-22_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="lecture-22_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="lecture-22_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="lecture-22_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":false},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 900,

        height: 500,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        // Bounds for smallest/largest possible scale to apply to content
        minScale: 0.2,

        maxScale: 2,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>